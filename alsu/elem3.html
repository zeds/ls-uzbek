<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .elem {
        display: flex;
        justify-content: space-between;
      }
    </style>
  </head>
  <body>
    <div id="lists"></div>
    <script>
      //親エレメントを取得
      const lists = document.getElementById("lists");

      const comments = [
        {
          id: "4f550e71-9705-42bb-85d9-5826e08780f7",
          name: "佐藤",
          comment: "優しい二匹に癒されます",
        },
        {
          id: "0a2c283a-0af7-4089-a9b2-4f2b850b4244",
          name: "高橋",
          comment: "いつも一緒に居る人がそばに居れば安心するんだよねぇ🍀",
        },
        {
          id: "07ae9121-d2c1-4d1d-8034-57a57fc3bbdb",
          name: "山田",
          comment: "そうなのねー😢 家族だね😭",
        },
      ];

      function showComments() {
        for (let i = 0; i < comments.length; i++) {
          //親エレメントを取得
          const lists = document.getElementById("lists");

          //メッセージの枠となるdivを作成
          const elem = document.createElement("div");
          //クラス名をelemにする
          elem.className = "elem";

          //メッセージを表示するdivを作成
          const text = document.createElement("div");
          //メッセージの内容を書く
          text.innerHTML = comments[i].name + ": " + comments[i].comment;

          //削除ボタン
          const deleteButton = document.createElement("button");
          //表示内容を書く
          deleteButton.innerHTML = "削除";

          //メッセージをelem枠の子供に追加
          elem.appendChild(text);
          //削除ボタンを追加
          elem.appendChild(deleteButton);

          //削除ボタンが押された時
          deleteButton.addEventListener("click", function () {
            // alert(`${i}番目が押されました`);
            comments.splice(i, 1);

            const elemAll = document.querySelectorAll(".elem");
            for (let k = 0; k < elemAll.length; k++) {
              elemAll[k].remove();
            }

            showComments();
          });

          //elem枠を親エレメントに追加
          lists.appendChild(elem);
        }
      }

      showComments();
    </script>
  </body>
</html>
