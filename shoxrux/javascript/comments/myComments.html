<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>myComment</title>
</head>
<style>
    body {

        font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
    }

    .container {
        height: 100vh;
        align-items: center;
        background-color: rgb(72 192 207);
        display: flex;
        justify-content: center;

    }

    .ans {
        background-color: rgb(219, 219, 219);
        padding: 10px 35px;
        border-radius: 10px;
    }

    .clear {
        margin-bottom: 5px;
        display: flex;
        justify-content: space-between;
    }

    .enter_value {
        display: flex;
        justify-content: space-between;
        margin: 10px 0;
    }

    .enter_value input {
        margin: 0 3px;
        outline: none;
    }

    .enter_value #commentButton {
        cursor: pointer;
        outline: none;
        margin: 0 5px;
    }
</style>

<body>
    <div class="container">

        <div class="ans">
            <div class="enter_value">
                <input type="text" id="name" placeholder="ãŠåå‰">
                <input type="text" id="comment" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆ">
                <button id="commentButton">ã‚³ãƒ¡ãƒ³ãƒˆ</button>
                <button id="clearButton">clear</button>
            </div>

        </div>
    </div>


    <script>
        let editMode = false;
        let indexComment = 0;
        // 1
        const comments = [
            {
                id: "4f550e71-9705-42bb-85d9-5826e08780f7",
                name: "ä½è—¤",
                comment: "å„ªã—ã„äºŒåŒ¹ã«ç™’ã•ã‚Œã¾ã™",
            },
            {
                id: "0a2c283a-0af7-4089-a9b2-4f2b850b4244",
                name: "é«˜æ©‹",
                comment: "ã„ã¤ã‚‚ä¸€ç·’ã«å±…ã‚‹äººãŒãã°ã«å±…ã‚Œã°å®‰å¿ƒã™ã‚‹ã‚“ã ã‚ˆã­ã‡ðŸ€",
            },
            {
                id: "07ae9121-d2c1-4d1d-8034-57a57fc3bbdb",
                name: "å±±ç”°",
                comment: "ãã†ãªã®ã­ãƒ¼ðŸ˜¢ å®¶æ—ã ã­ðŸ˜­",
            },

        ];
        // 1

        //2 show comments ===========>start
        function showComments() {
            for (let i = 0; i < comments.length; i++) {
                let waku = document.createElement("div");
                waku.classList = "clear"

                // new values
                let elem = document.createElement("div");
                elem.classList = "clear"
                elem.innerHTML = comments[i].name + ' : ' + comments[i].comment;
                waku.appendChild(elem);

                // izmentiz btn
                elem = document.createElement("button");
                elem.classList = "clear"  // <button class="clear">å‰Šé™¤</button>
                elem.innerHTML = "ç·¨é›†"
                waku.appendChild(elem);
                elem.addEventListener("click", function () {

                    // 
                    // ä»®
                    document.getElementById("name").value = "ä½è—¤"
                    document.getElementById("comment").value = "å„ªã—ã„äºŒåŒ¹ã«ç™’ã•ã‚Œã¾ã™"

                    // å®¿é¡Œ
                    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¡Œã®åå‰ã¨ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚’å–å¾—ã—ã¦ã€
                    // inputã«è¡¨ç¤º

                    document.getElementById("commentButton").innerHTML = "ç·¨é›†"
                    editing = true;

                })

                // izmentiz btn


                // =====button=====
                elem = document.createElement("button");
                elem.classList = "clear"
                elem.innerHTML = 'ç·¨é›†'
                waku.appendChild(elem);

                elem.addEventListener("click", function () {
                    alert("commentã®" + i + "ç•ªç›®ã‚’å‰Šé™¤ã—ã¾ã—ãŸ")
                    comments.splice(i, 1)
                    clearComments();
                    showComments();
                })
                // =====button=====

                ans.appendChild(waku);
            }
        }

        //2 show comments ===========>end

        //3 clear comment ===========>start
        function clearComments() {
            const all = document.querySelectorAll(".clear");
            for (let i = 0; i < all.length; i++) {
                all[i].remove();
            }
        }
        //3 clear comment ===========>end

        const ans = document.querySelector(".ans");
        const commentButton = document.getElementById("commentButton");

        //4 btn ======comment=====>

        commentButton.addEventListener("click", function () {

            let obj = {
                id: "111", name: name, comment,
            };
            if (editMode) {
                comments[indexComment].name = name;
                comments[indexComment].comment = comment;
                editMode = false;
                document.getElementById("commentButton").innerHTML =
                    "ã‚³ãƒ¡ãƒ³ãƒˆ";
            } else {
                comments.unshift(obj);
            }
            clearElements();

            // commentsã‚’è¡¨ç¤º
            showComments();
        });
        //4 btn ======comment=====>

        document.getElementById("clearButton").addEventListener('click', function () {
            clearComments();
            comments.splice(0, comments.length)
        })

        function clearElements() {
            const all = document.querySelectorAll(".elem");

            for (let i = 0; i < all.length; i++) {
                all[i].remove();
            }
        }

        // commentsã‚’è¡¨ç¤º
        showComments();
        // if (obj.name === '' || obj.comment === '') {
        //     alert("please enter name and comment!");
        //     return;
        // }
        // btn ======comment=====>

        // elem.innerHTML = "Shoxrux";
        // ans.appendChild(elem);



        showComments();

    </script>


</body>

</html>